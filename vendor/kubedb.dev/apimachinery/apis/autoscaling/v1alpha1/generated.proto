/*
Copyright AppsCode Inc. and Contributors

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/


// This file was autogenerated by go-to-protobuf. Do not edit it manually!

syntax = 'proto2';

package kubedb.dev.apimachinery.apis.autoscaling.v1alpha1;

import "k8s.io/api/autoscaling/v2beta2/generated.proto";
import "k8s.io/api/core/v1/generated.proto";
import "k8s.io/apimachinery/pkg/api/resource/generated.proto";
import "k8s.io/apimachinery/pkg/apis/meta/v1/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/schema/generated.proto";
import "kmodules.xyz/client-go/api/v1/generated.proto";

// Package-wide variables from generator "generated".
option go_package = "v1alpha1";

// ContainerResourcePolicy controls how autoscaler computes the recommended
// resources for a specific container.
message ContainerResourcePolicy {
  // Name of the container or DefaultContainerResourcePolicy, in which
  // case the policy is used by the containers that don't have their own
  // policy specified.
  optional string containerName = 1;

  // Whether autoscaler is enabled for the container. The default is "Auto".
  // +optional
  optional string mode = 2;

  // Specifies the minimal amount of resources that will be recommended
  // for the container. The default is no minimum.
  // +optional
  map<string, k8s.io.apimachinery.pkg.api.resource.Quantity> minAllowed = 3;

  // Specifies the maximum amount of resources that will be recommended
  // for the container. The default is no maximum.
  // +optional
  map<string, k8s.io.apimachinery.pkg.api.resource.Quantity> maxAllowed = 4;

  // Specifies the type of recommendations that will be computed
  // (and possibly applied) by VPA.
  // If not specified, the default of [ResourceCPU, ResourceMemory] will be used.
  // +optional
  // +patchStrategy=merge
  repeated string controlledResources = 5;

  // Specifies which resource values should be controlled.
  // The default is "RequestsAndLimits".
  // +optional
  optional string controlledValues = 6;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=elasticsearchautoscalers,singular=elasticsearchautoscaler,shortName=esscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message ElasticsearchAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional ElasticsearchAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional ElasticsearchAutoscalerStatus status = 3;
}

// ElasticsearchAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message ElasticsearchAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional ElasticsearchScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional ElasticsearchScalingRules scaleDown = 2;
}

// ElasticsearchAutoscalerList is a list of horizontal pod autoscaler objects.
message ElasticsearchAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated ElasticsearchAutoscaler items = 2;
}

// ElasticsearchAutoscalerSpec describes the desired functionality of the ElasticsearchAutoscaler.
message ElasticsearchAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default ElasticsearchScalingRules for scale up and scale down are used.
  // +optional
  optional ElasticsearchAutoscalerBehavior behavior = 5;
}

// ElasticsearchAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message ElasticsearchAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the ElasticsearchAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// ElasticsearchScalingPolicy is a single policy which must hold true for a specified past interval.
message ElasticsearchScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// ElasticsearchScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message ElasticsearchScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the ElasticsearchScalingRules will be discarded as invalid
  // +optional
  repeated ElasticsearchScalingPolicy policies = 2;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=etcdautoscalers,singular=etcdautoscaler,shortName=etcdscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message EtcdAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional EtcdAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional EtcdAutoscalerStatus status = 3;
}

// EtcdAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message EtcdAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional EtcdScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional EtcdScalingRules scaleDown = 2;
}

// EtcdAutoscalerList is a list of horizontal pod autoscaler objects.
message EtcdAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated EtcdAutoscaler items = 2;
}

// EtcdAutoscalerSpec describes the desired functionality of the EtcdAutoscaler.
message EtcdAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default EtcdScalingRules for scale up and scale down are used.
  // +optional
  optional EtcdAutoscalerBehavior behavior = 5;
}

// EtcdAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message EtcdAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the EtcdAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// EtcdScalingPolicy is a single policy which must hold true for a specified past interval.
message EtcdScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// EtcdScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message EtcdScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the EtcdScalingRules will be discarded as invalid
  // +optional
  repeated EtcdScalingPolicy policies = 2;
}

// HistogramCheckpoint contains data needed to reconstruct the histogram.
message HistogramCheckpoint {
  // Reference timestamp for samples collected within this histogram.
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time referenceTimestamp = 1;

  // Map from bucket index to bucket weight.
  map<string, uint32> bucketWeights = 2;

  // Sum of samples to be used as denominator for weights from BucketWeights.
  optional double totalWeight = 3;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=mariadbautoscalers,singular=mariadbautoscaler,shortName=mariascaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message MariaDBAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional MariaDBAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional MariaDBAutoscalerStatus status = 3;
}

// MariaDBAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message MariaDBAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional MariaDBScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional MariaDBScalingRules scaleDown = 2;
}

// MariaDBAutoscalerList is a list of horizontal pod autoscaler objects.
message MariaDBAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated MariaDBAutoscaler items = 2;
}

// MariaDBAutoscalerSpec describes the desired functionality of the MariaDBAutoscaler.
message MariaDBAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default MariaDBScalingRules for scale up and scale down are used.
  // +optional
  optional MariaDBAutoscalerBehavior behavior = 5;
}

// MariaDBAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message MariaDBAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the MariaDBAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// MariaDBScalingPolicy is a single policy which must hold true for a specified past interval.
message MariaDBScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// MariaDBScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message MariaDBScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the MariaDBScalingRules will be discarded as invalid
  // +optional
  repeated MariaDBScalingPolicy policies = 2;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=memcachedautoscalers,singular=memcachedautoscaler,shortName=mcscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message MemcachedAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional MemcachedAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional MemcachedAutoscalerStatus status = 3;
}

// MemcachedAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message MemcachedAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional MemcachedScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional MemcachedScalingRules scaleDown = 2;
}

// MemcachedAutoscalerList is a list of horizontal pod autoscaler objects.
message MemcachedAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated MemcachedAutoscaler items = 2;
}

// MemcachedAutoscalerSpec describes the desired functionality of the MemcachedAutoscaler.
message MemcachedAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default MemcachedScalingRules for scale up and scale down are used.
  // +optional
  optional MemcachedAutoscalerBehavior behavior = 5;
}

// MemcachedAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message MemcachedAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the MemcachedAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// MemcachedScalingPolicy is a single policy which must hold true for a specified past interval.
message MemcachedScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// MemcachedScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message MemcachedScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the MemcachedScalingRules will be discarded as invalid
  // +optional
  repeated MemcachedScalingPolicy policies = 2;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=mongodbautoscalers,singular=mongodbautoscaler,shortName=mgscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message MongoDBAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional MongoDBAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional MongoDBAutoscalerStatus status = 3;
}

// MongoDBAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message MongoDBAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional MongoDBScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional MongoDBScalingRules scaleDown = 2;
}

// MongoDBAutoscalerList is a list of horizontal pod autoscaler objects.
message MongoDBAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated MongoDBAutoscaler items = 2;
}

// MongoDBAutoscalerSpec describes the desired functionality of the MongoDBAutoscaler.
message MongoDBAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default MongoDBScalingRules for scale up and scale down are used.
  // +optional
  optional MongoDBAutoscalerBehavior behavior = 5;
}

// MongoDBAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message MongoDBAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the MongoDBAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// MongoDBScalingPolicy is a single policy which must hold true for a specified past interval.
message MongoDBScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// MongoDBScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message MongoDBScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the MongoDBScalingRules will be discarded as invalid
  // +optional
  repeated MongoDBScalingPolicy policies = 2;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=mysqlautoscalers,singular=mysqlautoscaler,shortName=myscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message MySQLAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional MySQLAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional MySQLAutoscalerStatus status = 3;
}

// MySQLAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message MySQLAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional MySQLScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional MySQLScalingRules scaleDown = 2;
}

// MySQLAutoscalerList is a list of horizontal pod autoscaler objects.
message MySQLAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated MySQLAutoscaler items = 2;
}

// MySQLAutoscalerSpec describes the desired functionality of the MySQLAutoscaler.
message MySQLAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default MySQLScalingRules for scale up and scale down are used.
  // +optional
  optional MySQLAutoscalerBehavior behavior = 5;
}

// MySQLAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message MySQLAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the MySQLAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// MySQLScalingPolicy is a single policy which must hold true for a specified past interval.
message MySQLScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// MySQLScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message MySQLScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the MySQLScalingRules will be discarded as invalid
  // +optional
  repeated MySQLScalingPolicy policies = 2;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=perconaxtradbautoscalers,singular=perconaxtradbautoscaler,shortName=pxcscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message PerconaXtraDBAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional PerconaXtraDBAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional PerconaXtraDBAutoscalerStatus status = 3;
}

// PerconaXtraDBAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message PerconaXtraDBAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional PerconaXtraDBScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional PerconaXtraDBScalingRules scaleDown = 2;
}

// PerconaXtraDBAutoscalerList is a list of horizontal pod autoscaler objects.
message PerconaXtraDBAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated PerconaXtraDBAutoscaler items = 2;
}

// PerconaXtraDBAutoscalerSpec describes the desired functionality of the PerconaXtraDBAutoscaler.
message PerconaXtraDBAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default PerconaXtraDBScalingRules for scale up and scale down are used.
  // +optional
  optional PerconaXtraDBAutoscalerBehavior behavior = 5;
}

// PerconaXtraDBAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message PerconaXtraDBAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the PerconaXtraDBAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// PerconaXtraDBScalingPolicy is a single policy which must hold true for a specified past interval.
message PerconaXtraDBScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// PerconaXtraDBScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message PerconaXtraDBScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the PerconaXtraDBScalingRules will be discarded as invalid
  // +optional
  repeated PerconaXtraDBScalingPolicy policies = 2;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=pgbouncerautoscalers,singular=pgbouncerautoscaler,shortName=pbscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message PgBouncerAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional PgBouncerAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional PgBouncerAutoscalerStatus status = 3;
}

// PgBouncerAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message PgBouncerAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional PgBouncerScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional PgBouncerScalingRules scaleDown = 2;
}

// PgBouncerAutoscalerList is a list of horizontal pod autoscaler objects.
message PgBouncerAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated PgBouncerAutoscaler items = 2;
}

// PgBouncerAutoscalerSpec describes the desired functionality of the PgBouncerAutoscaler.
message PgBouncerAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default PgBouncerScalingRules for scale up and scale down are used.
  // +optional
  optional PgBouncerAutoscalerBehavior behavior = 5;
}

// PgBouncerAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message PgBouncerAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the PgBouncerAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// PgBouncerScalingPolicy is a single policy which must hold true for a specified past interval.
message PgBouncerScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// PgBouncerScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message PgBouncerScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the PgBouncerScalingRules will be discarded as invalid
  // +optional
  repeated PgBouncerScalingPolicy policies = 2;
}

// PodResourcePolicy controls how autoscaler computes the recommended resources
// for containers belonging to the pod. There can be at most one entry for every
// named container and optionally a single wildcard entry with `containerName` = '*',
// which handles all containers that don't have individual policies.
message PodResourcePolicy {
  // Per-container resource policies.
  // +optional
  // +patchMergeKey=containerName
  // +patchStrategy=merge
  repeated ContainerResourcePolicy containerPolicies = 1;
}

// PodUpdatePolicy describes the rules on how changes are applied to the pods.
message PodUpdatePolicy {
  // Controls when autoscaler applies changes to the pod resources.
  // The default is 'Auto'.
  // +optional
  optional string updateMode = 1;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=postgresautoscalers,singular=postgresautoscaler,shortName=pgscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message PostgresAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional PostgresAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional PostgresAutoscalerStatus status = 3;
}

// PostgresAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message PostgresAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional PostgresScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional PostgresScalingRules scaleDown = 2;
}

// PostgresAutoscalerList is a list of horizontal pod autoscaler objects.
message PostgresAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated PostgresAutoscaler items = 2;
}

// PostgresAutoscalerSpec describes the desired functionality of the PostgresAutoscaler.
message PostgresAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default PostgresScalingRules for scale up and scale down are used.
  // +optional
  optional PostgresAutoscalerBehavior behavior = 5;
}

// PostgresAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message PostgresAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the PostgresAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// PostgresScalingPolicy is a single policy which must hold true for a specified past interval.
message PostgresScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// PostgresScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message PostgresScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the PostgresScalingRules will be discarded as invalid
  // +optional
  repeated PostgresScalingPolicy policies = 2;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=proxysqlautoscalers,singular=proxysqlautoscaler,shortName=pxscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message ProxySQLAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional ProxySQLAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional ProxySQLAutoscalerStatus status = 3;
}

// ProxySQLAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message ProxySQLAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional ProxySQLScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional ProxySQLScalingRules scaleDown = 2;
}

// ProxySQLAutoscalerList is a list of horizontal pod autoscaler objects.
message ProxySQLAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated ProxySQLAutoscaler items = 2;
}

// ProxySQLAutoscalerSpec describes the desired functionality of the ProxySQLAutoscaler.
message ProxySQLAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default ProxySQLScalingRules for scale up and scale down are used.
  // +optional
  optional ProxySQLAutoscalerBehavior behavior = 5;
}

// ProxySQLAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message ProxySQLAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the ProxySQLAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// ProxySQLScalingPolicy is a single policy which must hold true for a specified past interval.
message ProxySQLScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// ProxySQLScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message ProxySQLScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the ProxySQLScalingRules will be discarded as invalid
  // +optional
  repeated ProxySQLScalingPolicy policies = 2;
}

// RecommendedContainerResources is the recommendation of resources computed by
// autoscaler for a specific container. Respects the container resource policy
// if present in the spec. In particular the recommendation is not produced for
// containers with `ContainerScalingMode` set to 'Off'.
message RecommendedContainerResources {
  // Name of the container.
  optional string containerName = 1;

  // Recommended amount of resources. Observes ContainerResourcePolicy.
  map<string, k8s.io.apimachinery.pkg.api.resource.Quantity> target = 2;

  // Minimum recommended amount of resources. Observes ContainerResourcePolicy.
  // This amount is not guaranteed to be sufficient for the application to operate in a stable way, however
  // running with less resources is likely to have significant impact on performance/availability.
  // +optional
  map<string, k8s.io.apimachinery.pkg.api.resource.Quantity> lowerBound = 3;

  // Maximum recommended amount of resources. Observes ContainerResourcePolicy.
  // Any resources allocated beyond this value are likely wasted. This value may be larger than the maximum
  // amount of application is actually capable of consuming.
  // +optional
  map<string, k8s.io.apimachinery.pkg.api.resource.Quantity> upperBound = 4;

  // The most recent recommended resources target computed by the autoscaler
  // for the controlled pods, based only on actual resource usage, not taking
  // into account the ContainerResourcePolicy.
  // May differ from the Recommendation if the actual resource usage causes
  // the target to violate the ContainerResourcePolicy (lower than MinAllowed
  // or higher that MaxAllowed).
  // Used only as status indication, will not affect actual resource assignment.
  // +optional
  map<string, k8s.io.apimachinery.pkg.api.resource.Quantity> uncappedTarget = 5;
}

// RecommendedPodResources is the recommendation of resources computed by
// autoscaler. It contains a recommendation for each container in the pod
// (except for those with `ContainerScalingMode` set to 'Off').
message RecommendedPodResources {
  // Resources recommended by the autoscaler for each container.
  // +optional
  repeated RecommendedContainerResources containerRecommendations = 1;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=redisautoscalers,singular=redisautoscaler,shortName=rdscaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message RedisAutoscaler {
  // metadata is the standard object metadata.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // spec is the specification for the behaviour of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status.
  // +optional
  optional RedisAutoscalerSpec spec = 2;

  // status is the current information about the autoscaler.
  // +optional
  optional RedisAutoscalerStatus status = 3;
}

// RedisAutoscalerBehavior configures the scaling behavior of the target
// in both Up and Down directions (scaleUp and scaleDown fields respectively).
message RedisAutoscalerBehavior {
  // scaleUp is scaling policy for scaling Up.
  // If not set, the default value is the higher of:
  //   * increase no more than 4 pods per 60 seconds
  //   * double the number of pods per 60 seconds
  // No stabilization is used.
  // +optional
  optional RedisScalingRules scaleUp = 1;

  // scaleDown is scaling policy for scaling Down.
  // If not set, the default value is to allow to scale down to minReplicas pods, with a
  // 300 second stabilization window (i.e., the highest recommendation for
  // the last 300sec is used).
  // +optional
  optional RedisScalingRules scaleDown = 2;
}

// RedisAutoscalerList is a list of horizontal pod autoscaler objects.
message RedisAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of horizontal pod autoscaler objects.
  repeated RedisAutoscaler items = 2;
}

// RedisAutoscalerSpec describes the desired functionality of the RedisAutoscaler.
message RedisAutoscalerSpec {
  // scaleTargetRef points to the target resource to scale, and is used to the pods for which metrics
  // should be collected, as well as to actually change the replica count.
  optional k8s.io.api.core.v1.LocalObjectReference scaleTargetRef = 1;

  // minReplicas is the lower limit for the number of replicas to which the autoscaler
  // can scale down.  It defaults to 1 pod.  minReplicas is allowed to be 0 if the
  // alpha feature gate HPAScaleToZero is enabled and at least one Object or External
  // metric is configured.  Scaling is active as long as at least one metric value is
  // available.
  // +optional
  optional int32 minReplicas = 2;

  // maxReplicas is the upper limit for the number of replicas to which the autoscaler can scale up.
  // It cannot be less that minReplicas.
  optional int32 maxReplicas = 3;

  // metrics contains the specifications for which to use to calculate the
  // desired replica count (the maximum replica count across all metrics will
  // be used).  The desired replica count is calculated multiplying the
  // ratio between the target value and the current value by the current
  // number of pods.  Ergo, metrics used must decrease as the pod count is
  // increased, and vice-versa.  See the individual metric source types for
  // more information about how each type of metric must respond.
  // If not set, the default metric will be set to 80% average CPU utilization.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricSpec metrics = 4;

  // behavior configures the scaling behavior of the target
  // in both Up and Down directions (scaleUp and scaleDown fields respectively).
  // If not set, the default RedisScalingRules for scale up and scale down are used.
  // +optional
  optional RedisAutoscalerBehavior behavior = 5;
}

// RedisAutoscalerStatus describes the current status of a horizontal pod autoscaler.
message RedisAutoscalerStatus {
  // observedGeneration is the most recent generation observed by this autoscaler.
  // +optional
  optional int64 observedGeneration = 1;

  // lastScaleTime is the last time the RedisAutoscaler scaled the number of pods,
  // used by the autoscaler to control how often the number of pods is changed.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastScaleTime = 2;

  // currentReplicas is current number of replicas of pods managed by this autoscaler,
  // as last seen by the autoscaler.
  optional int32 currentReplicas = 3;

  // desiredReplicas is the desired number of replicas of pods managed by this autoscaler,
  // as last calculated by the autoscaler.
  optional int32 desiredReplicas = 4;

  // currentMetrics is the last read state of the metrics used by this autoscaler.
  // +optional
  repeated k8s.io.api.autoscaling.v2beta2.MetricStatus currentMetrics = 5;

  // conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 6;
}

// RedisScalingPolicy is a single policy which must hold true for a specified past interval.
message RedisScalingPolicy {
  // Type is used to specify the scaling policy.
  optional string type = 1;

  // Value contains the amount of change which is permitted by the policy.
  // It must be greater than zero
  optional int32 value = 2;

  // PeriodSeconds specifies the window of time for which the policy should hold true.
  // PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
  optional int32 periodSeconds = 3;
}

// RedisScalingRules configures the scaling behavior for one direction.
// These Rules are applied after calculating DesiredReplicas from metrics for the HPA.
// They can limit the scaling velocity by specifying scaling policies.
// They can prevent flapping by specifying the stabilization window, so that the
// number of replicas is not set instantly, instead, the safest value from the stabilization
// window is chosen.
message RedisScalingRules {
  // StabilizationWindowSeconds is the number of seconds for which past recommendations should be
  // considered while scaling up or scaling down.
  // StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
  // If not set, use the default values:
  // - For scale up: 0 (i.e. no stabilization is done).
  // - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
  // +optional
  optional int32 stabilizationWindowSeconds = 3;

  // selectPolicy is used to specify which policy should be used.
  // If not set, the default value MaxPolicySelect is used.
  // +optional
  optional string selectPolicy = 1;

  // policies is a list of potential scaling polices which can be used during scaling.
  // At least one policy must be specified, otherwise the RedisScalingRules will be discarded as invalid
  // +optional
  repeated RedisScalingPolicy policies = 2;
}

message UpgradeSpec {
  // Specifies the target version name from catalog
  optional string targetVersion = 1;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=verticalautoscalers,singular=verticalautoscaler,shortName=vascaler,categories={datastore,kubedb,appscode}
// +kubebuilder:subresource:status
message VerticalAutoscaler {
  // Standard object metadata. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // Specification of the behavior of the autoscaler.
  // More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status.
  optional VerticalAutoscalerSpec spec = 2;

  // Current information about the autoscaler.
  // +optional
  optional VerticalAutoscalerStatus status = 3;
}

// +kubebuilder:object:root=true
// +kubebuilder:subresource:status
message VerticalAutoscalerCheckpoint {
  // Standard object metadata. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // Specification of the checkpoint.
  // More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status.
  // +optional
  optional VerticalAutoscalerCheckpointSpec spec = 2;

  // Data of the checkpoint.
  // +optional
  optional VerticalAutoscalerCheckpointStatus status = 3;
}

// VerticalAutoscalerCheckpointList is a list of VerticalAutoscalerCheckpoint objects.
message VerticalAutoscalerCheckpointList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated VerticalAutoscalerCheckpoint items = 2;
}

// VerticalAutoscalerCheckpointSpec is the specification of the checkpoint object.
message VerticalAutoscalerCheckpointSpec {
  // Name of the VPA object that stored VerticalAutoscalerCheckpoint object.
  optional string vpaObjectName = 1;

  // Name of the checkpointed container.
  optional string containerName = 2;
}

// VerticalAutoscalerCheckpointStatus contains data of the checkpoint.
message VerticalAutoscalerCheckpointStatus {
  // The time when the status was last refreshed.
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastUpdateTime = 1;

  // Version of the format of the stored data.
  optional string version = 2;

  // Checkpoint of histogram for consumption of CPU.
  optional HistogramCheckpoint cpuHistograms = 3;

  // Checkpoint of histogram for consumption of memory.
  optional HistogramCheckpoint memoryHistogram = 4;

  // Timestamp of the fist sample from the histograms.
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time firstSampleStart = 5;

  // Timestamp of the last sample from the histograms.
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastSampleStart = 6;

  // Total number of samples in the histograms.
  optional int64 totalSamplesCount = 7;
}

// VerticalAutoscalerList is a list of VerticalAutoscaler objects.
message VerticalAutoscalerList {
  // metadata is the standard list metadata.
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // items is the list of vertical pod autoscaler objects.
  repeated VerticalAutoscaler items = 2;
}

// VerticalAutoscalerSpec is the specification of the behavior of the autoscaler.
message VerticalAutoscalerSpec {
  // TargetRef points to the controller managing the set of pods for the
  // autoscaler to control - e.g. Deployment, StatefulSet. VerticalAutoscaler
  // can be targeted at controller implementing scale subresource (the pod set is
  // retrieved from the controller's ScaleStatus) or some well known controllers
  // (e.g. for DaemonSet the pod set is read from the controller's spec).
  // If VerticalAutoscaler cannot use specified target it will report
  // ConfigUnsupported condition.
  // Note that VerticalAutoscaler does not require full implementation
  // of scale subresource - it will not use it to modify the replica count.
  // The only thing retrieved is a label selector matching pods grouped by
  // the target resource.
  optional k8s.io.api.core.v1.TypedLocalObjectReference targetRef = 1;

  // Describes the rules on how changes are applied to the pods.
  // If not specified, all fields in the `PodUpdatePolicy` are set to their
  // default values.
  // +optional
  optional PodUpdatePolicy updatePolicy = 2;

  // Controls how the autoscaler computes recommended resources.
  // The resource policy may be used to set constraints on the recommendations
  // for individual containers. If not specified, the autoscaler computes recommended
  // resources for all containers in the pod, without additional constraints.
  // +optional
  optional PodResourcePolicy resourcePolicy = 3;
}

// VerticalAutoscalerStatus describes the runtime state of the autoscaler.
message VerticalAutoscalerStatus {
  // The most recently computed amount of resources recommended by the
  // autoscaler for the controlled pods.
  // +optional
  optional RecommendedPodResources recommendation = 1;

  // Conditions is the set of conditions required for this autoscaler to scale its target,
  // and indicates whether or not those conditions are met.
  // +optional
  // +patchMergeKey=type
  // +patchStrategy=merge
  repeated kmodules.xyz.client_go.api.v1.Condition conditions = 2;
}

